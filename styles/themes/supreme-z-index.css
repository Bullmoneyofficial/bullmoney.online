/**
 * SUPREME Z-INDEX LAYER - Theme System Components
 * 
 * This file defines the absolute highest z-index layers in the entire application.
 * These values are designed to sit above ALL other UI elements including:
 * - Modal overlays (z-[99999999999])
 * - MultiStepLoader (z-[999999999])
 * - All other components
 * 
 * ARCHITECTURE:
 * - Theme Selector/Modal: 999999999999999 (15 nines - highest possible safe integer zone)
 * - Live Preview Overlay: 999999999999998 (sits just below theme UI)
 * - Music Controls: 999999999999997 (sits below overlay)
 * 
 * NEON BLUE THEME COLORS:
 * - Primary: #3b82f6
 * - Light: #60a5fa / #93c5fd
 * - Dark: #2563eb
 * - Glow: rgba(59, 130, 246, 0.4-0.8)
 * 
 * IMPORTANT: Do not use these z-index values anywhere else in the application.
 */

/* Theme-driven neon variables */
:root {
  --neon-blue: var(--accent-color, #3b82f6);
  --neon-blue-light: rgba(var(--accent-rgb, 59, 130, 246), 0.8);
  --neon-blue-dark: rgba(var(--accent-rgb, 59, 130, 246), 1);
  --neon-blue-glow: 0 0 20px rgba(var(--accent-rgb, 59, 130, 246), 0.4);
  --neon-blue-glow-strong: 0 0 30px rgba(var(--accent-rgb, 59, 130, 246), 0.6);
  --neon-blue-glow-intense: 0 0 40px rgba(var(--accent-rgb, 59, 130, 246), 0.8);
  --neon-blue-border: rgba(var(--accent-rgb, 59, 130, 246), 0.6);
}

/* Theme Selector Modal - Absolute Top Layer */
.theme-selector-modal-supreme {
  z-index: 999999999999999 !important;
  position: fixed !important;
  inset: 0 !important;
}

/* Theme Config Modal - Absolute Top Layer */
.theme-config-modal-supreme {
  z-index: 999999999999999 !important;
  position: fixed !important;
  inset: 0 !important;
}

/* Live Theme Preview Overlay - Just Below Modals */
.theme-preview-overlay-supreme {
  z-index: 999999999999998 !important;
  position: fixed !important;
  inset: 0 !important;
  pointer-events: none !important; /* Critical: Allows interaction through overlay */
  touch-action: none !important;
  user-select: none !important;
}

/* Theme Music Player Container - Below Overlay */
.theme-music-player-supreme {
  z-index: 999999999999997 !important;
  position: fixed !important;
  opacity: 0 !important;
  pointer-events: none !important;
}

/* Override for any conflicting z-index below this threshold */
.theme-system-layer {
  /* Ensure theme system components are always on top */
  isolation: isolate;
}

/* Smooth transitions for theme preview */
.theme-preview-transition {
  transition: 
    opacity 0.5s cubic-bezier(0.4, 0, 0.2, 1),
    filter 0.5s cubic-bezier(0.4, 0, 0.2, 1),
    background-color 0.5s cubic-bezier(0.4, 0, 0.2, 1);
  will-change: opacity, filter, background-color;
  transform: translateZ(0); /* GPU acceleration */
}

/* Ensure scrolling works through overlay */
.theme-preview-overlay-supreme * {
  pointer-events: none !important;
  user-select: none !important;
}

/* Performance optimization */
@media (prefers-reduced-motion: reduce) {
  .theme-preview-transition {
    transition-duration: 0.15s;
  }
}

/* Mobile optimizations */
@media (max-width: 768px) {
  .theme-preview-transition {
    transition-duration: 0.3s;
  }
}

/* Neon Blue Backdrop blur for modals */
.theme-modal-backdrop {
  backdrop-filter: blur(8px) saturate(150%);
  -webkit-backdrop-filter: blur(8px) saturate(150%);
}

/* Low performance device fallback */
@media (max-width: 768px) and (max-height: 896px) {
  .theme-modal-backdrop {
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
  }
}

/* Safari-specific fixes */
@supports (-webkit-backdrop-filter: blur(1px)) {
  .theme-modal-backdrop {
    backdrop-filter: blur(8px) saturate(150%);
    -webkit-backdrop-filter: blur(8px) saturate(150%);
  }
}

/* Neon Blue Glow Utilities */
.neon-blue-glow {
  box-shadow: var(--neon-blue-glow);
}

.neon-blue-glow-strong {
  box-shadow: var(--neon-blue-glow-strong);
}

.neon-blue-glow-intense {
  box-shadow: var(--neon-blue-glow-intense);
}

.neon-blue-text-glow {
  text-shadow: 0 0 10px rgba(59, 130, 246, 0.5), 0 0 20px rgba(59, 130, 246, 0.3);
}

.neon-blue-border-glow {
  border-color: var(--neon-blue-border);
  box-shadow: 0 0 15px rgba(59, 130, 246, 0.3);
}

/* Neon Blue Icon Glow */
.neon-blue-icon-glow {
  filter: drop-shadow(0 0 4px #3b82f6);
}
