/* BODY SCROLL LOCK WHEN MODAL OPEN */
/* Guard: only lock when a dialog is ACTUALLY open (prevents stale class blocking scroll) */
body.modal-open:has([role="dialog"]:not([data-state="closed"])),
body.menu-open:has([role="dialog"]:not([data-state="closed"])) {
  overflow: hidden !important;
  /* Prevent iOS bounce */
  position: fixed;
  width: 100%;
  height: 100%;
}

/* Fallback for browsers without :has() */
@supports not (selector(:has(*))) {
  body.modal-open,
  body.menu-open {
    overflow: hidden !important;
    position: fixed;
    width: 100%;
    height: 100%;
  }
}

/* CRITICAL: Never lock scroll on store pages via stale classes */
body.store-page-body.modal-open,
body.store-page-body.menu-open {
  overflow-y: auto !important;
  position: static !important;
  height: auto !important;
}

body[data-active-ui="gamesDrawer"].modal-open,
body[data-active-ui="supportDrawer"].modal-open {
  position: static !important;
  top: auto !important;
  height: auto !important;
}

/* But allow scroll inside the modal */
body.modal-open [role="dialog"],
body.modal-open [aria-modal="true"],
body.modal-open .modal-content {
  overflow-y: auto !important;
  -webkit-overflow-scrolling: touch;
  touch-action: pan-y !important;
}