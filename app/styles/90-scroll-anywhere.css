/* ============================================
   SCROLL ANYWHERE OVERRIDES (HOME + STORE)
   Allow pan gestures on any hit target while
   keeping explicit draggables locked.
   ============================================ */

html.home-active body,
html.home-active body *,
html.store-active body,
html.store-active body * {
  touch-action: pan-y pan-x !important;
}

/* Game iframes must handle ALL touch gestures internally (tap, swipe, pinch etc.)
   Specificity must beat html.store-active body * (0,1,2) â€” prefix with html.store-active
   ALSO must break the ancestor touch-action chain (browsers intersect ancestor values)
   so we override body & all intermediate ancestors when a game iframe is present */
html.store-active body:has([data-game-iframe]),
html.store-active [data-store-page]:has([data-game-iframe]),
html.store-active [data-store-page]:has([data-game-iframe]) > main,
html.store-active [data-game-iframe],
html.store-active [data-game-iframe] iframe,
html.store-active [data-game-iframe] *,
html.store-active iframe[data-game-frame],
[data-game-iframe],
[data-game-iframe] iframe,
iframe[data-game-frame] {
  touch-action: auto !important;
  pointer-events: auto !important;
  -webkit-overflow-scrolling: touch;
}

@media (hover: hover) and (pointer: fine) {
  html.home-active body,
  html.home-active body *,
  html.store-active body,
  html.store-active body * {
    touch-action: auto !important;
  }
}

/* Preserve explicit drag behavior when present */
html.home-active [draggable],
html.home-active [data-draggable],
html.store-active [draggable],
html.store-active [data-draggable] {
  touch-action: none !important;
}

/* ALL viewports: let scroll pass through Spline on home + store pages */
/* FIXED: Was limited to <=1200px - now covers ALL screen sizes */
html.home-active .spline-container,
html.home-active .spline-viewport-fill,
html.home-active .spline-wrapper,
html.home-active [data-spline],
html.home-active iframe[src*="spline"],
html.home-active canvas,
html.home-active spline-viewer,
html.store-active .spline-container,
html.store-active .spline-viewport-fill,
html.store-active .spline-wrapper,
html.store-active [data-spline],
html.store-active iframe[src*="spline"],
html.store-active canvas,
html.store-active spline-viewer {
  pointer-events: none !important;
  touch-action: pan-y pan-x !important;
}

/* Hero section elements must NEVER block scroll on ANY device or viewport */
#hero canvas,
#hero [data-spline],
#hero .spline-container,
#hero spline-viewer,
#hero iframe[src*="spline"],
#hero .cycling-bg-layer,
#hero .cycling-bg-item,
#hero .cycling-bg-item.active,
#hero .hero-wrapper {
  pointer-events: none !important;
  touch-action: pan-y !important;
}

/* Store hero elements must NEVER block scroll either */
[data-store-hero] img,
[data-store-hero] video,
[data-store-hero] canvas,
[data-store-hero] [data-spline],
[data-store-hero] .spline-container,
[data-store-hero] spline-viewer,
[data-store-hero] iframe[src*="spline"],
[data-store-hero] svg {
  pointer-events: none !important;
  touch-action: pan-y !important;
}

/* Store hero inner wrapper: allow scroll passthrough on mobile */
[data-store-hero] > div {
  touch-action: pan-y !important;
}

/* Games page hero must NEVER block scroll */
.store-layout section > .absolute,
.store-layout section img[class*="object-cover"],
.store-layout section video[class*="object-cover"] {
  pointer-events: none !important;
  touch-action: pan-y !important;
}

/* Re-enable pointer events on interactive elements within heroes */
[data-store-hero] a,
[data-store-hero] button,
[data-store-hero] [role="button"],
.store-layout section a,
.store-layout section button,
.store-layout section [role="button"] {
  pointer-events: auto !important;
}

/* Hero wrapper special: allow overflow Y for scroll passthrough */
#hero .hero-wrapper {
  overflow: visible !important;
  overflow-x: hidden !important;
}

/* Re-enable pointer-events only on interactive hero children (buttons, links) */
#hero .hero-content-overlay > *,
#hero a,
#hero button,
#hero [role="button"],
#hero input,
#hero select,
#hero textarea {
  pointer-events: auto !important;
}
