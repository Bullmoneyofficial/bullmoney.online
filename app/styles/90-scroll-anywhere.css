/* ============================================
   SCROLL ANYWHERE OVERRIDES (HOME + STORE)
   Allow pan gestures on any hit target while
   keeping explicit draggables locked.
   Updated 2026-02-13: Enhanced for all pages
   ============================================ */

html.home-active body,
html.home-active body *,
html.store-active body,
html.store-active body *,
html[data-games-page] body,
html[data-games-page] body *,
html[data-design-page] body,
html[data-design-page] body *,
html[data-app-page] body,
html[data-app-page] body * {
  touch-action: pan-y pan-x !important;
}

/* Design page: allow scroll-anywhere while preserving interactive controls */
html[data-design-page] .design-page-root,
html[data-design-page] .design-content-wrap,
html[data-design-page] .design-root,
html[data-design-page] .design-sections {
  touch-action: pan-y pan-x !important;
  pointer-events: auto !important;
}

html[data-design-page] a,
html[data-design-page] button,
html[data-design-page] [role="button"],
html[data-design-page] input,
html[data-design-page] select,
html[data-design-page] textarea,
html[data-design-page] [contenteditable="true"] {
  pointer-events: auto !important;
  touch-action: manipulation !important;
}

/* Game iframes must handle ALL touch gestures internally (tap, swipe, pinch etc.)
   Specificity must beat html.store-active body * (0,1,2) â€” prefix with html.store-active
   ALSO must break the ancestor touch-action chain (browsers intersect ancestor values)
   so we override body & all intermediate ancestors when a game iframe is present */
html.store-active body:has([data-game-iframe]),
html.store-active [data-store-page]:has([data-game-iframe]),
html.store-active [data-store-page]:has([data-game-iframe]) > main,
html.store-active [data-game-iframe],
html.store-active [data-game-iframe] iframe,
html.store-active [data-game-iframe] *,
html.store-active iframe[data-game-frame],
[data-game-iframe],
[data-game-iframe] iframe,
iframe[data-game-frame] {
  touch-action: auto !important;
  pointer-events: auto !important;
  -webkit-overflow-scrolling: touch;
}

@media (hover: hover) and (pointer: fine) {
  html.home-active body,
  html.home-active body *,
  html.store-active body,
  html.store-active body * {
    touch-action: auto !important;
  }
}

/* Preserve explicit drag behavior when present */
html.home-active [draggable],
html.home-active [data-draggable],
html.store-active [draggable],
html.store-active [data-draggable] {
  touch-action: none !important;
}

/* ALL viewports: let scroll pass through Spline on home + store + games + design pages */
/* FIXED: Was limited to <=1200px - now covers ALL screen sizes and ALL pages */
html.home-active .spline-container,
html.home-active .spline-viewport-fill,
html.home-active .spline-wrapper,
html.home-active [data-spline],
html.home-active iframe[src*="spline"],
html.home-active canvas,
html.home-active spline-viewer,
html.store-active .spline-container,
html.store-active .spline-viewport-fill,
html.store-active .spline-wrapper,
html.store-active [data-spline],
html.store-active iframe[src*="spline"],
html.store-active canvas,
html.store-active spline-viewer,
html[data-games-page] .spline-container,
html[data-games-page] .spline-viewport-fill,
html[data-games-page] .spline-wrapper,
html[data-games-page] [data-spline],
html[data-games-page] iframe[src*="spline"],
html[data-games-page] canvas,
html[data-games-page] spline-viewer,
html[data-design-page] .spline-container,
html[data-design-page] .spline-viewport-fill,
html[data-design-page] .spline-wrapper,
html[data-design-page] [data-spline],
html[data-design-page] iframe[src*="spline"],
html[data-design-page] canvas,
html[data-design-page] spline-viewer,
html[data-app-page] .spline-container,
html[data-app-page] .spline-viewport-fill,
html[data-app-page] .spline-wrapper,
html[data-app-page] [data-spline],
html[data-app-page] iframe[src*="spline"],
html[data-app-page] canvas,
html[data-app-page] spline-viewer {
  pointer-events: none !important;
  touch-action: pan-y pan-x !important;
}

/* Design Studio must capture drag/touch interactions (do not disable canvas events) */
html[data-design-page] .studio-canvas-wrap,
html[data-design-page] .studio-canvas-stage,
html[data-design-page] .studio-canvas-el,
html[data-design-page] .studio-canvas-wrap canvas,
html[data-design-page] .studio-fallback-wrapper,
html[data-design-page] .studio-fallback-wrapper canvas,
html[data-design-page] .studio-fallback-wrapper [role="application"] {
  pointer-events: auto !important;
  touch-action: none !important;
}

/* Excalidraw embed: allow full pointer/touch interaction inside iframe */
html[data-design-page] .excalidraw-editor-wrapper,
html[data-design-page] .excalidraw-editor-wrapper .excalidraw-embed {
  pointer-events: auto !important;
  touch-action: none !important;
}

/* Hero section elements must NEVER block scroll on ANY device or viewport */
#hero canvas,
#hero [data-spline],
#hero .spline-container,
#hero spline-viewer,
#hero iframe[src*="spline"],
#hero .cycling-bg-layer,
#hero .cycling-bg-item,
#hero .cycling-bg-item.active,
#hero .hero-wrapper {
  pointer-events: none !important;
  touch-action: pan-y !important;
}

/* Store hero elements must NEVER block scroll either */
[data-store-hero] img,
[data-store-hero] video,
[data-store-hero] canvas,
[data-store-hero] [data-spline],
[data-store-hero] .spline-container,
[data-store-hero] spline-viewer,
[data-store-hero] iframe[src*="spline"],
[data-store-hero] svg {
  pointer-events: none !important;
  touch-action: pan-y !important;
}

/* Store hero inner wrapper: allow scroll passthrough on mobile */
[data-store-hero] > div {
  touch-action: pan-y !important;
}

/* Games page hero must NEVER block scroll */
.store-layout section > .absolute,
.store-layout section img[class*="object-cover"],
.store-layout section video[class*="object-cover"] {
  pointer-events: none !important;
  touch-action: pan-y !important;
}

/* Re-enable pointer events on interactive elements within heroes */
[data-store-hero] a,
[data-store-hero] button,
[data-store-hero] [role="button"],
.store-layout section a,
.store-layout section button,
.store-layout section [role="button"] {
  pointer-events: auto !important;
}

/* Hero wrapper special: allow overflow Y for scroll passthrough */
#hero .hero-wrapper {
  overflow: visible !important;
  overflow-x: hidden !important;
}

/* Re-enable pointer-events only on interactive hero children (buttons, links) */
#hero .hero-content-overlay > *,
#hero a,
#hero button,
#hero [role="button"],
#hero input,
#hero select,
#hero textarea {
  pointer-events: auto !important;
}

/* ============================================
   SAMSUNG BROWSER SCROLL ENHANCEMENTS
   Additional fixes for Samsung Internet
   ============================================ */
@supports (-webkit-appearance: none) and (not (-webkit-touch-callout: none)) {
  /* Samsung browser - ensure all pages can scroll */
  html.samsung-browser,
  html.samsung-browser body,
  body.samsung-scroll {
    overflow-y: auto !important;
    overflow-x: hidden !important;
    touch-action: pan-y pan-x !important;
    -webkit-overflow-scrolling: touch !important;
    transform: none !important;
  }
  
  /* Samsung browser - page-specific scroll */
  html.samsung-browser.home-active,
  html.samsung-browser.store-active,
  html.samsung-browser[data-games-page],
  html.samsung-browser[data-design-page] {
    height: auto !important;
    min-height: 100vh !important;
    position: relative !important;
  }
}

/* ============================================
   CHROME BROWSER SCROLL ENHANCEMENTS
   Chrome, Edge, Brave, Opera fixes
   ============================================ */
html.chrome-browser,
html.chrome-browser body,
body.chrome-scroll {
  overflow-y: auto !important;
  overflow-x: hidden !important;
  touch-action: pan-y pan-x !important;
  -webkit-overflow-scrolling: touch !important;
  transform: none !important;
}

html.chrome-browser.home-active,
html.chrome-browser.store-active,
html.chrome-browser[data-games-page],
html.chrome-browser[data-design-page] {
  height: auto !important;
  min-height: 100vh !important;
  position: relative !important;
}

/* ============================================
   SAFARI BROWSER SCROLL ENHANCEMENTS
   Safari desktop & iOS fixes
   ============================================ */
html.safari-browser,
html.safari-browser body,
body.safari-scroll {
  overflow-y: auto !important;
  overflow-x: hidden !important;
  touch-action: pan-y pan-x !important;
  -webkit-overflow-scrolling: touch !important;
  transform: none !important;
}

html.safari-browser.home-active,
html.safari-browser.store-active,
html.safari-browser[data-games-page],
html.safari-browser[data-design-page] {
  height: auto !important;
  min-height: 100vh !important;
  position: relative !important;
}

/* iOS Safari specific */
html.ios-safari {
  height: -webkit-fill-available;
  min-height: -webkit-fill-available;
}

html.ios-safari body {
  min-height: -webkit-fill-available;
}

/* ============================================
   IN-APP BROWSER SCROLL ENHANCEMENTS
   Instagram, Facebook, Google, TikTok, Twitter
   ============================================ */
html.inapp-browser,
html.instagram-browser,
html.facebook-browser,
html.google-browser,
html.tiktok-browser,
html.twitter-browser,
body.inapp-scroll {
  overflow-y: auto !important;
  overflow-x: hidden !important;
  touch-action: pan-y pan-x !important;
  -webkit-overflow-scrolling: touch !important;
  transform: none !important;
  height: auto !important;
  min-height: 100vh !important;
}

html.inapp-browser.home-active,
html.instagram-browser.home-active,
html.facebook-browser.home-active,
html.google-browser.home-active,
html.inapp-browser.store-active,
html.instagram-browser.store-active,
html.facebook-browser.store-active,
html.google-browser.store-active,
html.inapp-browser[data-games-page],
html.instagram-browser[data-games-page],
html.facebook-browser[data-games-page],
html.google-browser[data-games-page],
html.inapp-browser[data-design-page],
html.instagram-browser[data-design-page],
html.facebook-browser[data-design-page],
html.google-browser[data-design-page] {
  position: relative !important;
}
