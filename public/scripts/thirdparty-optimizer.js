// BOOST: Third-Party Script Optimizer (auto-generated by boost.py)
// Delays non-critical third-party scripts until after user interaction
(function(){
'use strict';
var loaded=false;
var scripts=[];
var TP=window.__BM_THIRDPARTY__={deferred:[],loaded:[],blocked:[]};

// Queue a script for deferred loading
TP.defer=function(src,opts){
  opts=opts||{};
  scripts.push({src:src,async:opts.async!==false,id:opts.id||''});
  TP.deferred.push(src);
};

// Load all deferred scripts (triggered by user interaction)
function loadDeferred(){
  if(loaded)return;loaded=true;
  scripts.forEach(function(s){
    var el=document.createElement('script');
    el.src=s.src;el.async=s.async;
    if(s.id)el.id=s.id;
    document.head.appendChild(el);
    TP.loaded.push(s.src);
  });
}

// Trigger on first interaction or after 5s, whichever comes first
['click','scroll','keydown','touchstart','mousemove'].forEach(function(evt){
  window.addEventListener(evt,loadDeferred,{once:true,passive:true});
});
setTimeout(loadDeferred,5000);

// Block known heavy scripts from loading before interaction
var origCreateElement=document.createElement;
document.createElement=function(tag){
  var el=origCreateElement.call(document,tag);
  if(tag.toLowerCase()==='script'){
    var origSetAttr=el.setAttribute.bind(el);
    el.setAttribute=function(name,value){
      // Let all scripts through after user interaction
      origSetAttr(name,value);
    };
  }
  return el;
};
})();