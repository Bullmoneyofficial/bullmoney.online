// BULLMONEY BOOST LOADER v5.0 (auto-generated by boost.py)
// This script coordinates ALL performance optimizations in priority order
// Load order: device-detect (sync) → spline-turbo (eager) → memory-guardian (eager)
//           → inapp-shield (eager) → crash-prevention (eager) → gpu-manager (load)
//           → perf-boost (load) → seo-boost (idle) → offline (idle)
//           → network-optimizer (idle) → thirdparty-optimizer (idle)
(function(){
  'use strict';
  var head=document.head;
  var loaded={};
  
  function loadScript(src,strategy){
    if(loaded[src])return;
    loaded[src]=true;
    var s=document.createElement('script');
    s.src=src;
    s.defer=true;
    if(strategy==='idle'&&'requestIdleCallback' in window){
      requestIdleCallback(function(){head.appendChild(s)},{timeout:3000});
    } else if(strategy==='load'){
      window.addEventListener('load',function(){
        setTimeout(function(){head.appendChild(s)},100);
      });
    } else if(strategy==='eager'){
      // Load ASAP but non-blocking
      s.async=true;
      head.appendChild(s);
    } else {
      head.appendChild(s);
    }
  }
  
  // Priority 1: Device detection (needed before first paint decisions)
  // Already inline or loaded synchronously
  
  // Priority 2: CRITICAL - 3D/Spline turbo (must be ready before Spline loads)
  loadScript('/scripts/spline-turbo.js','eager');
  
  // Priority 3: CRITICAL - Memory guardian (must catch OOM before it happens)
  loadScript('/scripts/memory-guardian.js','eager');
  
  // Priority 4: CRITICAL - In-app browser shield (fix quirks immediately)
  loadScript('/scripts/inapp-shield.js','eager');
  
  // Priority 5: CRITICAL - Crash prevention for heavy pages
  loadScript('/scripts/crash-prevention.js','eager');
  
  // Priority 6: GPU/WebGL manager (after interactive)
  loadScript('/scripts/gpu-manager.js','load');
  
  // Priority 7: Performance monitoring (after interactive)
  loadScript('/scripts/perf-boost.js','load');
  
  // Priority 8: SEO enhancements (when idle)
  loadScript('/scripts/seo-boost.js','idle');
  
  // Priority 9: Offline detection (when idle)
  loadScript('/scripts/offline-detect.js','idle');
  
  // Priority 10: Network waterfall optimizer (when idle)
  loadScript('/scripts/network-optimizer.js','idle');
  
  // Priority 11: Third-party script optimizer (when idle)
  loadScript('/scripts/thirdparty-optimizer.js','idle');
  
  // Mark boost as loaded
  document.documentElement.setAttribute('data-boost','loaded');
  document.documentElement.setAttribute('data-boost-version','4.0');
  window.__BM_BOOST_VERSION__='4.0';
})();