/**
 * Navbar Theme Filters & Z-Index Configuration
 * Ensures navbar applies theme CSS filters and sits below loaders
 */

/* ============================================================================
   THEME FILTER MAPPINGS
   Maps theme IDs to CSS filter values for color transformation
   ============================================================================ */

:root {
  /* Default filters (no transformation) */
  --navbar-filter-default: hue-rotate(0deg) saturate(1) brightness(1);
  
  /* CRYPTO THEMES */
  --navbar-filter-bitcoin: hue-rotate(0deg) saturate(1) brightness(1);
  --navbar-filter-ethereum: hue-rotate(-30deg) saturate(1.2) brightness(1.05);
  --navbar-filter-ripple: hue-rotate(200deg) saturate(1.1) brightness(0.95);
  --navbar-filter-doge: hue-rotate(45deg) saturate(1.15) brightness(1.1);
  --navbar-filter-cardano: hue-rotate(270deg) saturate(1.1) brightness(0.98);
  --navbar-filter-solana: hue-rotate(-20deg) saturate(1.3) brightness(1.08);
  --navbar-filter-polkadot: hue-rotate(280deg) saturate(1.2) brightness(1.02);
  --navbar-filter-stellar: hue-rotate(190deg) saturate(1.15) brightness(0.97);
  
  /* MARKET THEMES */
  --navbar-filter-bullish: hue-rotate(100deg) saturate(1.3) brightness(1.15);
  --navbar-filter-bearish: hue-rotate(0deg) saturate(1.2) brightness(0.9);
  --navbar-filter-neutral: hue-rotate(0deg) saturate(0.8) brightness(1);
  --navbar-filter-volatile: hue-rotate(-40deg) saturate(1.4) brightness(1.2);
  
  /* SPECIAL THEMES */
  --navbar-filter-midnight: hue-rotate(0deg) saturate(0.7) brightness(0.85);
  --navbar-filter-neon: hue-rotate(0deg) saturate(1.5) brightness(1.3);
  --navbar-filter-retro: hue-rotate(30deg) saturate(1.1) brightness(1.05);
  --navbar-filter-cyberpunk: hue-rotate(-50deg) saturate(1.8) brightness(1.25);
  --navbar-filter-matrix: hue-rotate(120deg) saturate(1.2) brightness(0.95);
  --navbar-filter-ocean: hue-rotate(200deg) saturate(1.1) brightness(1);
  --navbar-filter-desert: hue-rotate(40deg) saturate(1.15) brightness(1.1);
}

/* ============================================================================
   NAVBAR CONTAINER - Z-INDEX & FILTER APPLICATION
   z-40: Below loaders (z-50) but above page content
   ============================================================================ */

.navbar-themed {
  z-index: 40;
  filter: var(--theme-filter, none);
  transition: filter 0.5s ease-in-out, opacity 0.3s ease-in-out;
  position: fixed;
  top: 8px;
  left: 0;
  right: 0;
  width: 100%;
  pointer-events: none;
}

/* ============================================================================
   Z-INDEX STACKING CONTEXT
   Ensures proper layering across the application
   ============================================================================ */

/* Lowest layer - Page content */
body {
  z-index: 1;
}

/* Navbar - Below loaders */
[data-navbar-container],
.navbar-themed {
  z-index: 40;
}

/* Loaders & Modals - Above navbar */
.multi-step-loader,
[role="dialog"],
.modal,
.loader {
  z-index: 50;
}

/* Fixed overlays and high-priority elements */
.fixed-overlay,
.backdrop,
[class*="backdrop"] {
  z-index: 45;
}

/* Top-level UI elements */
.tooltip,
.popover,
.dropdown {
  z-index: 55;
}

/* Control panel - Highest priority */
.control-panel-themed {
  z-index: 60;
}

/* ============================================================================
   SMOOTH TRANSITIONS
   Filter and opacity transitions for theme changes
   ============================================================================ */

.navbar-themed,
[data-navbar-container],
.control-panel-themed {
  transition: 
    filter 0.5s cubic-bezier(0.4, 0, 0.2, 1),
    opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1),
    background-color 0.3s ease,
    border-color 0.3s ease,
    box-shadow 0.3s ease;
}

/* ============================================================================
   TOOLTIP & TIP ANIMATIONS
   Enhanced animations for navbar tips and helper tooltips
   ============================================================================ */

@keyframes tipSlideUp {
  from {
    opacity: 0;
    transform: translateY(8px) translateX(-50%);
  }
  to {
    opacity: 1;
    transform: translateY(0) translateX(-50%);
  }
}

@keyframes tipSlideDown {
  from {
    opacity: 1;
    transform: translateY(0) translateX(-50%);
  }
  to {
    opacity: 0;
    transform: translateY(8px) translateX(-50%);
  }
}

@keyframes tipPulseGlow {
  0% {
    box-shadow: 0 0 15px rgba(59, 130, 246, 0.2), inset 0 0 20px rgba(59, 130, 246, 0.1);
  }
  50% {
    box-shadow: 0 0 25px rgba(59, 130, 246, 0.4), inset 0 0 30px rgba(59, 130, 246, 0.15);
  }
  100% {
    box-shadow: 0 0 15px rgba(59, 130, 246, 0.2), inset 0 0 20px rgba(59, 130, 246, 0.1);
  }
}

@keyframes dotPulse {
  0%, 100% {
    opacity: 0.6;
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(1.2);
  }
}

@keyframes textFadeIn {
  from {
    opacity: 0;
    clip-path: inset(0 100% 0 0);
  }
  to {
    opacity: 1;
    clip-path: inset(0 0 0 0);
  }
}


/* Tooltip styling with glow animation */
[role="tooltip"] {
  animation: tipSlideUp 0.3s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

/* Mobile tip glow animation */
.mobile-helper-tip {
  animation: tipPulseGlow 3s ease-in-out infinite;
}

/* ============================================================================
   DOCK ITEM HOVER EFFECTS
   Enhanced visual feedback for dock items
   ============================================================================ */

.dock-item-base {
  transition: all 0.2s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.dock-item-base:hover {
  transform: translateY(-4px);
}

.dock-icon-container {
  position: relative;
  transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.dock-icon-container::before {
  content: '';
  position: absolute;
  inset: -8px;
  background: radial-gradient(circle, rgba(59, 130, 246, 0.1) 0%, transparent 70%);
  border-radius: 2rem;
  opacity: 0;
  transition: opacity 0.3s ease;
  pointer-events: none;
}

.dock-icon-container:hover::before {
  opacity: 1;
}

/* ============================================================================
   PULSING INDICATOR ANIMATIONS
   Better pulse effects for notification dots
   ============================================================================ */

.pulse-indicator {
  position: relative;
  display: flex;
  height: 8px;
  width: 8px;
}

.pulse-indicator-ring {
  animation: dotPulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  position: absolute;
  inset: 0;
  border-radius: 50%;
}

.pulse-indicator-dot {
  position: relative;
  height: 100%;
  width: 100%;
  border-radius: 50%;
}

/* ============================================================================
   TEXT ROTATION ANIMATION
   For rotating tips in tooltips
   ============================================================================ */

@keyframes rotateTextIn {
  from {
    opacity: 0;
    transform: rotateX(-90deg) translateY(5px);
  }
  to {
    opacity: 1;
    transform: rotateX(0) translateY(0);
  }
}

@keyframes rotateTextOut {
  from {
    opacity: 1;
    transform: rotateX(0) translateY(0);
  }
  to {
    opacity: 0;
    transform: rotateX(90deg) translateY(-5px);
  }
}

/* ============================================================================
   ENHANCED BUTTON STATE ANIMATIONS
   Better feedback for interactive elements
   ============================================================================ */

/* ============================================================================
   ENHANCED BUTTON STATE ANIMATIONS
   Better feedback for interactive elements
   ============================================================================ */

.nav-button {
  position: relative;
  overflow: hidden;
  transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.nav-button::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 0;
  height: 0;
  border-radius: 50%;
  background: rgba(59, 130, 246, 0.1);
  transform: translate(-50%, -50%);
  transition: width 0.6s, height 0.6s;
  pointer-events: none;
}

.nav-button:hover::after {
  width: 300px;
  height: 300px;
}

/* ============================================================================
   GLASS MORPHISM EFFECTS
   Premium glass effects for modern UI
   ============================================================================ */

.glass-effect {
  background: rgba(0, 0, 0, 0.5);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.1);
}

.glass-effect-heavy {
  background: rgba(0, 0, 0, 0.6);
  backdrop-filter: blur(30px);
  -webkit-backdrop-filter: blur(30px);
  border: 1px solid rgba(59, 130, 246, 0.2);
}

.glass-effect-light {
  background: rgba(0, 0, 0, 0.3);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(59, 130, 246, 0.15);
}


/* ============================================================================
   ENHANCED MOBILE CONTROLS GLASS STYLING
   Premium mobile navbar styling
   ============================================================================ */

.mobile-controls-glass {
  background: rgba(0, 0, 0, 0.55);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1.5px solid rgba(59, 130, 246, 0.3);
  box-shadow: 
    0 8px 32px 0 rgba(31, 38, 135, 0.15),
    inset 0 0 20px rgba(59, 130, 246, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

.mobile-controls-glass:hover {
  border-color: rgba(59, 130, 246, 0.6);
  box-shadow: 
    0 8px 40px 0 rgba(31, 38, 135, 0.25),
    inset 0 0 30px rgba(59, 130, 246, 0.15),
    inset 0 1px 0 rgba(255, 255, 255, 0.15);
}

/* ============================================================================
   DESKTOP DOCK GLASS STYLING
   Enhanced dock appearance with glass morphism
   ============================================================================ */

.dock-glass {
  background: rgba(0, 0, 0, 0.5);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1.5px solid rgba(59, 130, 246, 0.3);
  box-shadow:
    0 8px 32px 0 rgba(31, 38, 135, 0.15),
    inset 0 1px 0 rgba(255, 255, 255, 0.08),
    inset 0 0 20px rgba(59, 130, 246, 0.08);
}

.dock-glass:hover {
  border-color: rgba(59, 130, 246, 0.6);
  box-shadow:
    0 8px 40px 0 rgba(31, 38, 135, 0.25),
    inset 0 1px 0 rgba(255, 255, 255, 0.12),
    inset 0 0 30px rgba(59, 130, 246, 0.12);
}

/* ============================================================================
   ICON GLASS CONTAINERS
   Enhanced icon button styling
   ============================================================================ */

.icon-glass {
  background: rgba(0, 0, 0, 0.45);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(59, 130, 246, 0.25);
  transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.icon-glass:hover {
  background: rgba(0, 0, 0, 0.55);
  border-color: rgba(59, 130, 246, 0.5);
  box-shadow: 0 0 25px rgba(59, 130, 246, 0.3);
}

/* ============================================================================
   TOOLTIP GLASS STYLING
   Enhanced tooltip appearance
   ============================================================================ */

.tooltip-glass {
  background: rgba(0, 0, 0, 0.8);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(59, 130, 246, 0.4);
  box-shadow:
    0 8px 32px rgba(31, 38, 135, 0.2),
    inset 0 1px 0 rgba(255, 255, 255, 0.08),
    0 0 30px rgba(59, 130, 246, 0.3);
}

/* ============================================================================
   MENU GLASS STYLING
   Enhanced mobile menu styling
   ============================================================================ */

.menu-glass {
  background: rgba(0, 0, 0, 0.85);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1.5px solid rgba(59, 130, 246, 0.35);
  box-shadow:
    0 12px 48px 0 rgba(31, 38, 135, 0.3),
    inset 0 1px 0 rgba(255, 255, 255, 0.1),
    inset 0 0 30px rgba(59, 130, 246, 0.08);
}

.glass-active {
  background: rgba(0, 0, 0, 0.6);
  border-color: rgba(59, 130, 246, 0.7);
  box-shadow: 0 0 40px rgba(59, 130, 246, 0.5);
}

/* ============================================================================
   MEDIA QUERIES
   Ensure proper z-index and filter behavior on different screen sizes
   ============================================================================ */

@media (max-width: 1024px) {
  .navbar-themed {
    z-index: 40;
  }
}

@media (max-width: 640px) {
  .navbar-themed {
    z-index: 40;
    filter: var(--theme-filter, none);
  }
}

/* ============================================================================
   ANIMATION STATES
   Ensure filters apply during animations
   ============================================================================ */

.navbar-themed[data-animating="true"] {
  filter: var(--theme-filter, none);
  z-index: 40;
}

/* Reduce motion */
@media (prefers-reduced-motion: reduce) {
  .navbar-themed,
  [data-navbar-container],
  .control-panel-themed {
    transition: none;
  }
}

/* ============================================================================
   PERFORMANCE OPTIMIZATIONS
   CSS containment, will-change, and GPU acceleration hints
   ============================================================================ */

/* Containment for dock items - isolates layout/paint */
.dock-item-optimized {
  contain: layout style;
  will-change: transform, width, height;
  transform: translateZ(0);
  backface-visibility: hidden;
}

/* Navbar container containment */
.navbar-themed {
  contain: layout style;
  will-change: filter, opacity;
}

/* Optimize tooltips */
.tooltip-optimized {
  contain: layout paint style;
  will-change: transform, opacity;
  transform: translateZ(0);
}

/* Reduce animation cost for mobile tips */
.mobile-helper-optimized {
  contain: layout paint style;
  will-change: transform, opacity;
  transform: translateZ(0);
}

/* GPU-accelerated animations */
.gpu-accelerated {
  transform: translateZ(0);
  backface-visibility: hidden;
  perspective: 1000px;
}

/* Disable expensive effects on low-end devices */
@media (max-width: 768px) {
  .dock-glass {
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
  }
  
  .menu-glass {
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
  }
}

/* Reduce animations when battery saver is on */
@media (prefers-reduced-motion: reduce) {
  .dock-item-optimized {
    will-change: auto;
    transition: none !important;
  }
  
  .animate-ping {
    animation: none !important;
  }
  
  .mobile-helper-optimized {
    animation: none !important;
  }
}
